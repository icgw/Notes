# 将 C++ 视作多范型的编程语言

一开始，C++ 只是在 C 的基础上增加了面向对象的特性。起初，C++ 的名字为 *C with Classes*，可见它是继承了 C 发展而来的。

随着该语言日渐成熟，C++ 大胆而冒险地采纳了与 *C with Classes* 不同的设计理念、语言特性和编程策略，例如：异常处理（参见 29）带了结构化函数的不同方法、泛型编程（参见 41）带了新的设计理念、 STL 带来了前所未有的扩展方式。

简单来说，C++ 就是多种相关语言的综合体，而不是单一的语言。对于某特定的子语言，它的某些编程规范直观易懂，然而到了另一个子语言，该规范可能又会改变。为了能更好地理解 C++，你必须知道它的主要子语言有哪些。幸运地是，它只有四种子语言：
+ **C**：说到底 C++ 仍然是以 C 为基础。区块、语句、预处理器、内置数据类型、数组、指针等，统统来自于 C。许多时候 C++ 解决问题的方式其实就是更高级的 C 的用法（参见 2 提到了预处理器的另外选择，参见 13 谈到管理资源的对象），然而仅用 C 的部分，会有其局限性：没有模板、没有异常处理、无法重载等等。
+ **面向对象 C++**：C++ 的这部分就是 *C with Classes* 所涵盖的类（包括构造、析构）、封装、继承、多态、虚函数（动态绑定）等等。这部分是面向对象最直接的体现。
+ **模板 C++**：这是 C++ 泛型编程的部分，也是大部分程序员缺乏经验的部分。泛型编程的思想弥漫了整个 C++，然而 special template-only clauses 的良好编程规则却很罕见（参见 46 在调用模板函数时使用类型转换）。事实上，泛型编程十分强大，它带来了崭新的编程范型——模板元编程。（参见 48，这里提供了模板元编程的梗概）除非你是硬核的模板偏执狂，你无需担心它。模板元编程的规则很少与主流的 C++ 相互作用。
+ **STL**：STL 即标准模板库，然而它可是非常特殊的。它使容器、迭代器、算法以及函数对象协作地十分漂亮，然而你也可以有其他方式实现这些功能。你要知道，STL 有其特别的处事方式，只要你使用它，就必然要知道它的规范。

记住这四类子语言，在切换不同语言时，你不必惊讶于改变不同的高效编程规范。例如：一般地，对于 C 风格的内置数据类型，值传递一般比引用传递更高效，但是对于面向对象的 C++，常量引用传递表现更好，而模板 C++ 尤其如此，你甚至不知道对象的类型是什么。当你切换到 STL 时，你知道迭代器和函数都是都是使用 C 的指针实现的，而值传递方式在这就不见得更高效了（关于参数传递方式的更多细节，参见 20）。

总之，C++ 不是一套有统一规范的语言。它是四种子语言的综合体，各自有其规范。记住这类子语言的特性，你会更容易理解 C++。

# 牢记
+ C++ 高效编程规范取决于你使用 C++ 的哪部分子语言。